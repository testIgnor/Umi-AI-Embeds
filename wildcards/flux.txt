[set debugging]0[/set]

[##]
Overrides Prompt Properties
[/##]
[function set_overrides_pre]

[chance 0]
[set age_range]
lower
[/set]
[/chance]

[/function]


[##]
Overrides Prompt Properties
[/##]
[function set_overrides_post]
[chance 0]
[set prompt_suffix]
[choose]
<[imageformat]>, ([call wildcards/MyLocation]:1.3), airline stewardess outfit, stewardess uniform
<[imageformat]>, ([call wildcards/MyLocation]:1.3), airline stewardess outfit, stewardess uniform, <[ezexposure][upper][get eff_gen _before=[ _after=]]>
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (airline stewardess leotard:1.3), airline stewardess outfit, stewardess uniform, <[covered][lower][get eff_gen _before=[ _after=]]>
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (airline stewardess leotard:1.3), airline stewardess outfit, stewardess uniform, <[ezcovered][get eff_gen _before=[ _after=]]>
[/choose]
[/set]
[/chance]

[chance 0]
[set prompt_suffix]
[choose]
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (business suit leotard:1.3), business suit, tight clothes, bare legs, <[ezcovered][get eff_gen _before=[ _after=]]>**(stockings, leggings, pantyhose:1.5)**
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (business suit leotard:1.3), business suit, tight clothes, bare legs, bare arms, sleeveless, <[ezcovered][get eff_gen _before=[ _after=]]>**(stockings, leggings, pantyhose, jacket, sleeves:1.5)**
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (business suit leotard:1.3), business suit, tight clothes, stockings, leggings, pantyhose, <[ezcovered][get eff_gen _before=[ _after=]]>
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (business suit leotard:1.3), business suit, tight clothes, bare legs, <[ezexposure][upper][get eff_gen _before=[ _after=]]>**(stockings, leggings, pantyhose:1.5)**
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (business suit leotard:1.3), business suit, tight clothes, bare legs, bare arms, sleeveless, <[ezexposure][upper][get eff_gen _before=[ _after=]]>**(stockings, leggings, pantyhose, jacket, sleeves:1.5)**
<[imageformat]>, ([call wildcards/MyLocation]:1.3), (business suit leotard:1.3), business suit, tight clothes, stockings, leggings, pantyhose, <[ezexposure][upper][get eff_gen _before=[ _after=]]>
[/choose]
[/set]
[/chance]


[##]
Chooses a franchise from a fixed list
[/##]
[function choose_franchise_simple]
[set characterType]
[choose]
characters
[/choose]
[/set]
[set franchise]
[choose]
celebs
[/choose]
[/set]

[set characterprompt]
<[get characterType _before=[ _after=]][get franchise _before=[ _after=]]>
[/set]

[/function]


[##]
Makes the prompt
[/##]
[function make_prompt]

[call preprocess]

[call make_single]

[call set_model]

[/function]


[##]
Sets gender_prompt
[/##]
[function set_gender]
[set gender]female[/set]

[chance 25]
[set gender]
male
[/set]
[/chance]

[chance 20]
[set gender]
futanari
[/set]
[/chance]

[switch gender]
    [case "female"]
        [set gender_short]1girl[/set]
        [set eff_gen]female[/set]
    [/case]
    [case "futanari"]
        [set gender_short]1futa[/set]
        [set eff_gen]futanari[/set]
        [call get_futa]
    [/case]
    [case "male"]
        [set gender_short]1boy[/set]
        [set eff_gen]futanari[/set]
        [set gender_suffix], (genderswap:1.5), <[ezpenis]>[/set]
    [/case]
[/switch]

[/function]


[##]
Helper function for futa parameters
[/##]
[function get_futa]
[set futa_type]
standard
[/set]

[chance 25]
[set futa_type]
[choose]
chastity
strapon
[/choose]
[/set]
[/chance]

[chance 20]
[set futa_type]
[choose]
beast
[/choose]
[/set]
[/chance]

[chance 20]
[set futa_type]
[choose]
aberration
[/choose]
[/set]
[/chance]

[set gender_suffix]
, <[FutaAddon][get futa_type _before=[ _after=]]>
[/set]

[/function]


[##]
Sets age range
[/##]
[function set_age_range]

[set age_range]
upper
[/set]

[chance 80]
[set age_range]
lower
[/set]
[/chance]

[chance 30]
[set age_range]
middle
[/set]
[/chance]

[/function]


[##]
Sets age_prompt
[/##]
[function set_age gender]

[set ageprompt]
as a <[ezage][get gender _before=[ _after=]][get age_range _before=[ _after=]]>
[/set]

[set is_hairless]
[call wildcards/no_hair]
[/set]

[if "franchise in is_hairless"]
[set ageprompt]
as a <[ezage][get gender _before=[ _after=]][get age_range _before=[ _after=]][--Hairy]>
[/set]
[/if]

[/function]


[##]
Filter and choose clothing from myclothing
[/##]
[function get_clothing clothing_type]
[filter_tags clothing clothing_type="{get clothing_type}" _must_match="all"]
[choose][call wildcards/myclothing][/choose]

[/function]


[##]
Common Preprocessing Steps
[/##]
[function preprocess]
[call choose_franchise_simple]
[call set_gender]
[call set_age_range]
[call set_age gender="{get gender}"]

[/function]


[##]
Makes a 1character prompt
[/##]
[function make_single]

[call set_overrides_pre]

[set character_preset]NSFW, [get gender_short], (solo:1.5), [get characterprompt], [get ageprompt][get gender_suffix], <[EZEmotion]>, <[GazeFormat]>[chance 10], <[ezpreg]>[/chance], (solo:1.5)**(person in background, people in background:2.0)**[/set]

[set prompt_suffix]
    [chance 80]
        <[imageformat]>, ([call wildcards/MyLocation]:1.3), [choose][call wildcards/myclothing][/choose]
    [/chance]
    [else]
        <[imageformat]>, ([call wildcards/MyLocation]:1.3), <[eznude][get eff_gen _before=[ _after=]]>
    [/else]
[/set]

[call set_overrides_post]

[set umistring][get character_preset], [strip-lora][get prompt_suffix][/strip-lora][/set]

[set retrieved_string][Umi _has_options _verbose="{get debugging}" _debug="{get debugging}"][get umistring][/Umi][/set]

[set opt][choose _case=0][get retrieved_string][/choose][/set]
[set p_prompt][choose _case=1][get retrieved_string][/choose][/set]
[set n_prompt][choose _case=2][get retrieved_string][/choose][/set]

[/function]


[##]
Main function
[/##]
[function main_function]

[call make_prompt]

[set no_lora]
[char-count <]
[get p_prompt]
[/char-count]
[/set]

[while "no_lora > 6"]
[call make_prompt]

[set no_lora]
[char-count <]
[get p_prompt]
[/char-count]
[/set]
[/while]

[if "no_lora > 3"]
[set p_prompt][half-lora][get p_prompt][/half-lora][/set]
[/if]

[get p_style], [get p_prompt]

[set negative_prompt][get n_style], [get n_prompt][/set]

[/function]

[call main_function]